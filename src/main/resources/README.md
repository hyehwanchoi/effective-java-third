# 직렬화된 인스턴스 대신 직렬화 프록시 사용을 검토하라

* 직렬화 구현 시 직렬화 프록시 패턴으로 위험을 줄일 수 있다.
* 직렬화 프록시 패턴은 바깥 클래스의 논리적 상태를 정밀하게 표현하는 중첩 클래스를 설계해 private static 으로 선언한다.
  * 이 중첩 클래스가 직렬화 프록시다.
  * 중첩 클래스의 생성자는 단 하나여야 하며, 바깥 클래스를 매개변수로 받아야 한다.
  * 바깥 클래스와 직렬화 프록시 모두 직렬화를 구현한다고 선언해야 한다.
* 역직렬화된 인스턴스가 해당 클래스의 불변식을 만족하는지 검사할 또 다른 수단을 강구하지 않아도 된다.
* 직렬화 프록시 패턴은 가짜 바이트 스트림 공격과 내부 필드 탈취 공격을 프록시 수준에서 차단해준다.
* final 로 선언해도 되므로 진정한 불변으로 만들 수 있다.

### 직렬화 프록시 패턴의 한계
1. 클라이언트가 멋대로 확장할 수 있는 클래스에는 적용할 수 없다.
2. 객체 그래프에 순환이 있는 클래스에도 적용할 수 없다.
3. 방어적 복사보다 성능이 좋지 않다.