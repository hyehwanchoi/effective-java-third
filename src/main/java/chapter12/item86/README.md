# Serializable 을 구현할지는 신중히 결정하라

* Serializable 을 구현하면 직렬화된 바이트 스트림 인코딩도 하나의 공개 API 가 된다.
  * 기본 직렬화 형태에서는 클래스의 private 과 package-private 인스턴스 필드들마저 API 로 공개되는 꼴이 된다.
  * 필드로의 접근을 최대한 막아 정보를 은닉하는 것도 무력화된다.
* 상속용으로 설계된 클래스는 대부분 Serializable 을 구현하면 안 되며, 인터페이스도 대부분 Serializable 을 확장해서는 안 된다.
* 내부 클래스는 직렬화를 구현하지 말아야 한다.
  * 정적 멤버 클래스는 Serializable 을 구현해도 된다.

### 직렬화가 클래스 개선을 방해한다.
* 자동 생성되는 값에 의존하면 쉽게 호환성이 깨져버려 런타임에 InvalidClassException 이 발생할 것이다.
* Serializable 구현의 두 번째 문제는 버그와 보안 구멍이 생길 위험이 높아진다.
  * 기본 역직렬화를 사용하면 불변식 깨짐과 허가되지 않은 접근에 쉽게 노출된다.
* Serializable 구현으로 릴리즈 시에 테스트할 것이 늘어난다.

### 클래스의 인스턴스 필드가 직렬화와 확장이 모두 가능하다면 주의할 점
* 인스턴스 필드 값 중 불변식을 보장해야 할 게 있다면 반드시 하위 클래스에서 finalize 메서드를 재정의하지 못하게 해야 한다.
  * finalize 메서드를 자신이 재정의하면서 final 로 선언한다.
* 인스턴스 필드 중 기본값으로 초기화되면 위배되는 불변식이 있다면 클래스에 다음의 readObjectNoData 메서드를 반드시 추가해야 한다.

### Serializable 을 구현하지 않기로 할 때의 주의할 점
* 상속용 클래스인데 직렬화를 지원하지 않을 때 역직렬화를 하려면 그 상위 클래스는 매개변수가 없는 생성자를 제공해야 하는데
  이런 생성자를 제공하지 않으면 하위 클래스에서는 어쩔 수 없이 직렬화 프록시 패턴을 사용해야 한다.